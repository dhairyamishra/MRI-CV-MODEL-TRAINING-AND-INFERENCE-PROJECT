Test Run: 2025-12-03 23:24:09

======================================================================
  SliceWise Phase 2 - Comprehensive Test Suite
======================================================================

üîç Discovering tests...
üìù Found 5 test files:

   - test_smoke.py
   - test_classifier.py
   - test_predictor.py
   - test_gradcam.py
   - test_data_pipeline.py

======================================================================
  Running Tests
======================================================================


----------------------------------------------------------------------
  Running: test_smoke.py
----------------------------------------------------------------------
============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\dhair\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\--DPM-MAIN-DIR--\windsurf_projects\MRI-CV-MODEL-TRAINING-AND-INFERENCE-PROJECT
configfile: pyproject.toml
plugins: anyio-4.9.0, cov-7.0.0
collecting ... collected 6 items

tests/test_smoke.py::test_pytorch_import PASSED                          [ 16%]
tests/test_smoke.py::test_cuda_availability PASSED                       [ 33%]
tests/test_smoke.py::test_numpy_import PASSED                            [ 50%]
tests/test_smoke.py::test_basic_conv2d PASSED                            [ 66%]
tests/test_smoke.py::test_basic_unet_forward PASSED                      [ 83%]
tests/test_smoke.py::test_src_package_exists PASSED                      [100%]

=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.13.2-final-0 _______________

Name                             Stmts   Miss  Cover   Missing
--------------------------------------------------------------
src\__init__.py                      1      0   100%
src\data\__init__.py                 1      1     0%   22
src\data\kaggle_mri_dataset.py      60     60     0%   5-203
src\data\preprocess_kaggle.py       84     84     0%   7-206
src\data\split_kaggle.py            86     86     0%   7-204
src\data\transforms.py             103    103     0%   7-264
src\eval\__init__.py                 3      3     0%   7-10
src\eval\eval_cls.py               167    167     0%   12-389
src\eval\grad_cam.py               157    157     0%   13-403
src\inference\__init__.py            2      2     0%   7-9
src\inference\predict.py            75     75     0%   8-239
src\models\__init__.py               2      2     0%   7-9
src\models\classifier.py            89     89     0%   8-287
src\training\__init__.py             2      2     0%   7-9
src\training\train_cls.py          281    281     0%   12-571
--------------------------------------------------------------
TOTAL                             1113   1112     1%
Coverage HTML written to dir htmlcov
============================== 6 passed in 2.01s ==============================


‚è±Ô∏è  Time: 2.93s

----------------------------------------------------------------------
  Running: test_classifier.py
----------------------------------------------------------------------
============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\dhair\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\--DPM-MAIN-DIR--\windsurf_projects\MRI-CV-MODEL-TRAINING-AND-INFERENCE-PROJECT
configfile: pyproject.toml
plugins: anyio-4.9.0, cov-7.0.0
collecting ... collected 18 items

tests/test_classifier.py::TestBrainTumorClassifier::test_model_creation PASSED [  5%]
tests/test_classifier.py::TestBrainTumorClassifier::test_forward_pass PASSED [ 11%]
tests/test_classifier.py::TestBrainTumorClassifier::test_single_channel_input PASSED [ 16%]
tests/test_classifier.py::TestBrainTumorClassifier::test_feature_extraction PASSED [ 22%]
tests/test_classifier.py::TestBrainTumorClassifier::test_parameter_count PASSED [ 27%]
tests/test_classifier.py::TestBrainTumorClassifier::test_freeze_unfreeze PASSED [ 33%]
tests/test_classifier.py::TestBrainTumorClassifier::test_different_input_sizes PASSED [ 38%]
tests/test_classifier.py::TestBrainTumorClassifier::test_dropout_rate PASSED [ 44%]
tests/test_classifier.py::TestBrainTumorClassifier::test_cam_target_layer PASSED [ 50%]
tests/test_classifier.py::TestConvNeXtClassifier::test_model_creation PASSED [ 55%]
tests/test_classifier.py::TestConvNeXtClassifier::test_forward_pass PASSED [ 61%]
tests/test_classifier.py::TestConvNeXtClassifier::test_cam_target_layer PASSED [ 66%]
tests/test_classifier.py::TestCreateClassifier::test_create_efficientnet PASSED [ 72%]
tests/test_classifier.py::TestCreateClassifier::test_create_convnext PASSED [ 77%]
tests/test_classifier.py::TestCreateClassifier::test_invalid_model_name PASSED [ 83%]
tests/test_classifier.py::TestCreateClassifier::test_custom_parameters PASSED [ 88%]
tests/test_classifier.py::TestModelGradients::test_backward_pass PASSED  [ 94%]
tests/test_classifier.py::TestModelGradients::test_frozen_backbone_no_gradients PASSED [100%]

=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.13.2-final-0 _______________

Name                             Stmts   Miss  Cover   Missing
--------------------------------------------------------------
src\__init__.py                      1      0   100%
src\data\__init__.py                 1      1     0%   22
src\data\kaggle_mri_dataset.py      60     60     0%   5-203
src\data\preprocess_kaggle.py       84     84     0%   7-206
src\data\split_kaggle.py            86     86     0%   7-204
src\data\transforms.py             103    103     0%   7-264
src\eval\__init__.py                 3      3     0%   7-10
src\eval\eval_cls.py               167    167     0%   12-389
src\eval\grad_cam.py               157    157     0%   13-403
src\inference\__init__.py            2      2     0%   7-9
src\inference\predict.py            75     75     0%   8-239
src\models\__init__.py               2      0   100%
src\models\classifier.py            89     25    72%   47-48, 68-70, 76-77, 175-176, 194-199, 203-204, 271-287
src\training\__init__.py             2      2     0%   7-9
src\training\train_cls.py          281    281     0%   12-571
--------------------------------------------------------------
TOTAL                             1113   1046     6%
Coverage HTML written to dir htmlcov
============================= 18 passed in 5.73s ==============================


‚è±Ô∏è  Time: 7.00s

----------------------------------------------------------------------
  Running: test_predictor.py
----------------------------------------------------------------------
============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\dhair\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\--DPM-MAIN-DIR--\windsurf_projects\MRI-CV-MODEL-TRAINING-AND-INFERENCE-PROJECT
configfile: pyproject.toml
plugins: anyio-4.9.0, cov-7.0.0
collecting ... collected 15 items

tests/test_predictor.py::TestClassifierPredictor::test_predictor_creation PASSED [  6%]
tests/test_predictor.py::TestClassifierPredictor::test_device_auto_selection PASSED [ 13%]
tests/test_predictor.py::TestClassifierPredictor::test_preprocess_grayscale_image PASSED [ 20%]
tests/test_predictor.py::TestClassifierPredictor::test_preprocess_rgb_image PASSED [ 26%]
tests/test_predictor.py::TestClassifierPredictor::test_preprocess_different_sizes PASSED [ 33%]
tests/test_predictor.py::TestClassifierPredictor::test_predict_single_image PASSED [ 40%]
tests/test_predictor.py::TestClassifierPredictor::test_predict_without_probabilities PASSED [ 46%]
tests/test_predictor.py::TestClassifierPredictor::test_predict_batch PASSED [ 53%]
tests/test_predictor.py::TestClassifierPredictor::test_predict_from_path PASSED [ 60%]
tests/test_predictor.py::TestClassifierPredictor::test_class_names PASSED [ 66%]
tests/test_predictor.py::TestClassifierPredictor::test_prediction_consistency PASSED [ 73%]
tests/test_predictor.py::TestPredictorEdgeCases::test_uint8_image PASSED [ 80%]
tests/test_predictor.py::TestPredictorEdgeCases::test_very_small_image PASSED [ 86%]
tests/test_predictor.py::TestPredictorEdgeCases::test_very_large_image PASSED [ 93%]
tests/test_predictor.py::TestPredictorEdgeCases::test_empty_batch PASSED [100%]

=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.13.2-final-0 _______________

Name                             Stmts   Miss  Cover   Missing
--------------------------------------------------------------
src\__init__.py                      1      0   100%
src\data\__init__.py                 1      1     0%   22
src\data\kaggle_mri_dataset.py      60     60     0%   5-203
src\data\preprocess_kaggle.py       84     84     0%   7-206
src\data\split_kaggle.py            86     86     0%   7-204
src\data\transforms.py             103    103     0%   7-264
src\eval\__init__.py                 3      3     0%   7-10
src\eval\eval_cls.py               167    167     0%   12-389
src\eval\grad_cam.py               157    157     0%   13-403
src\inference\__init__.py            2      0   100%
src\inference\predict.py            75      6    92%   91-94, 229-239
src\models\__init__.py               2      0   100%
src\models\classifier.py            89     52    42%   47-48, 68-70, 76-77, 115-116, 126, 130-131, 135-136, 140, 144, 168-214, 218, 222, 258-266, 271-287
src\training\__init__.py             2      2     0%   7-9
src\training\train_cls.py          281    281     0%   12-571
--------------------------------------------------------------
TOTAL                             1113   1002    10%
Coverage HTML written to dir htmlcov
============================= 15 passed in 7.30s ==============================


‚è±Ô∏è  Time: 8.54s

----------------------------------------------------------------------
  Running: test_gradcam.py
----------------------------------------------------------------------
============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\dhair\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\--DPM-MAIN-DIR--\windsurf_projects\MRI-CV-MODEL-TRAINING-AND-INFERENCE-PROJECT
configfile: pyproject.toml
plugins: anyio-4.9.0, cov-7.0.0
collecting ... collected 15 items

tests/test_gradcam.py::TestGradCAM::test_gradcam_creation PASSED         [  6%]
tests/test_gradcam.py::TestGradCAM::test_generate_cam PASSED             [ 13%]
tests/test_gradcam.py::TestGradCAM::test_cam_with_target_class PASSED    [ 20%]
tests/test_gradcam.py::TestGradCAM::test_cam_without_target_class PASSED [ 26%]
tests/test_gradcam.py::TestGradCAM::test_generate_overlay PASSED         [ 33%]
tests/test_gradcam.py::TestGradCAM::test_overlay_with_different_alpha PASSED [ 40%]
tests/test_gradcam.py::TestGradCAM::test_hooks_registered PASSED         [ 46%]
tests/test_gradcam.py::TestGradCAM::test_activations_saved PASSED        [ 53%]
tests/test_gradcam.py::TestGradCAM::test_gradients_saved PASSED          [ 60%]
tests/test_gradcam.py::TestGradCAMEdgeCases::test_different_input_sizes PASSED [ 66%]
tests/test_gradcam.py::TestGradCAMEdgeCases::test_batch_size_one_required PASSED [ 73%]
tests/test_gradcam.py::TestGradCAMEdgeCases::test_cam_shape_matches_feature_map PASSED [ 80%]
tests/test_gradcam.py::TestOverlayGeneration::test_overlay_size_matches_input PASSED [ 86%]
tests/test_gradcam.py::TestOverlayGeneration::test_overlay_with_3d_input PASSED [ 93%]
tests/test_gradcam.py::TestOverlayGeneration::test_overlay_value_range PASSED [100%]

============================== warnings summary ===============================
tests/test_gradcam.py: 13 warnings
  C:\Users\dhair\AppData\Local\Programs\Python\Python313\Lib\site-packages\torch\nn\modules\module.py:1830: FutureWarning: Using a non-full backward hook when the forward contains multiple autograd Nodes is deprecated and will be removed in future versions. This hook will be missing some grad_input. Please use register_full_backward_hook to get the documented behavior.
    self._maybe_warn_non_full_backward_hook(args, result, grad_fn)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.13.2-final-0 _______________

Name                             Stmts   Miss  Cover   Missing
--------------------------------------------------------------
src\__init__.py                      1      0   100%
src\data\__init__.py                 1      0   100%
src\data\kaggle_mri_dataset.py      60     47    22%   34-50, 54, 72-90, 99-103, 125-127, 155-184, 189-203
src\data\preprocess_kaggle.py       84     84     0%   7-206
src\data\split_kaggle.py            86     86     0%   7-204
src\data\transforms.py             103     73    29%   17, 20-26, 33-34, 37-43, 50-51, 54-60, 67-68, 71-78, 85, 88-93, 100, 103-108, 115, 118-120, 143, 165, 188, 221, 235-264
src\eval\__init__.py                 3      0   100%
src\eval\eval_cls.py               167    133    20%   53-74, 79-95, 108-126, 150-172, 181-199, 208-223, 232-246, 257-268, 272-275, 279-295, 299-345, 365-367, 371-389
src\eval\grad_cam.py               157     94    40%   188-309, 331-369, 373-403
src\inference\__init__.py            2      2     0%   7-9
src\inference\predict.py            75     75     0%   8-239
src\models\__init__.py               2      0   100%
src\models\classifier.py            89     51    43%   47-48, 68-70, 76-77, 115-116, 130-131, 135-136, 140, 144, 168-214, 218, 222, 258-266, 271-287
src\training\__init__.py             2      2     0%   7-9
src\training\train_cls.py          281    281     0%   12-571
--------------------------------------------------------------
TOTAL                             1113    928    17%
Coverage HTML written to dir htmlcov
======================= 15 passed, 13 warnings in 9.06s =======================


‚è±Ô∏è  Time: 10.71s

----------------------------------------------------------------------
  Running: test_data_pipeline.py
----------------------------------------------------------------------
============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\dhair\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\--DPM-MAIN-DIR--\windsurf_projects\MRI-CV-MODEL-TRAINING-AND-INFERENCE-PROJECT
configfile: pyproject.toml
plugins: anyio-4.9.0, cov-7.0.0
collecting ... collected 16 items

tests/test_data_pipeline.py::TestTransforms::test_random_rotation90 PASSED [  6%]
tests/test_data_pipeline.py::TestTransforms::test_random_intensity_shift PASSED [ 12%]
tests/test_data_pipeline.py::TestTransforms::test_random_intensity_scale PASSED [ 18%]
tests/test_data_pipeline.py::TestTransforms::test_random_gaussian_noise PASSED [ 25%]
tests/test_data_pipeline.py::TestTransforms::test_transform_probability PASSED [ 31%]
tests/test_data_pipeline.py::TestTransforms::test_transform_composition PASSED [ 37%]
tests/test_data_pipeline.py::TestTransformPresets::test_train_transforms PASSED [ 43%]
tests/test_data_pipeline.py::TestTransformPresets::test_val_transforms PASSED [ 50%]
tests/test_data_pipeline.py::TestTransformPresets::test_strong_train_transforms PASSED [ 56%]
tests/test_data_pipeline.py::TestTransformPresets::test_light_train_transforms PASSED [ 62%]
tests/test_data_pipeline.py::TestTransformEdgeCases::test_all_zeros_image PASSED [ 68%]
tests/test_data_pipeline.py::TestTransformEdgeCases::test_all_ones_image PASSED [ 75%]
tests/test_data_pipeline.py::TestTransformEdgeCases::test_different_image_sizes PASSED [ 81%]
tests/test_data_pipeline.py::TestTransformEdgeCases::test_transform_determinism_with_seed PASSED [ 87%]
tests/test_data_pipeline.py::TestDataLoading::test_dataloader_creation PASSED [ 93%]
tests/test_data_pipeline.py::TestDataLoading::test_batch_shapes SKIPPED  [100%]

=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.13.2-final-0 _______________

Name                             Stmts   Miss  Cover   Missing
--------------------------------------------------------------
src\__init__.py                      1      0   100%
src\data\__init__.py                 1      0   100%
src\data\kaggle_mri_dataset.py      60     20    67%   42, 85, 88, 99-103, 125-127, 189-203
src\data\preprocess_kaggle.py       84     84     0%   7-206
src\data\split_kaggle.py            86     86     0%   7-204
src\data\transforms.py             103     28    73%   25, 42, 59, 76-77, 92, 107, 235-264
src\eval\__init__.py                 3      3     0%   7-10
src\eval\eval_cls.py               167    167     0%   12-389
src\eval\grad_cam.py               157    157     0%   13-403
src\inference\__init__.py            2      2     0%   7-9
src\inference\predict.py            75     75     0%   8-239
src\models\__init__.py               2      2     0%   7-9
src\models\classifier.py            89     89     0%   8-287
src\training\__init__.py             2      2     0%   7-9
src\training\train_cls.py          281    281     0%   12-571
--------------------------------------------------------------
TOTAL                             1113    996    11%
Coverage HTML written to dir htmlcov
======================== 15 passed, 1 skipped in 2.17s ========================


‚è±Ô∏è  Time: 3.06s

======================================================================
  Test Summary
======================================================================

üìä Results:

   ‚úÖ PASSED  test_smoke.py
   ‚úÖ PASSED  test_classifier.py
   ‚úÖ PASSED  test_predictor.py
   ‚úÖ PASSED  test_gradcam.py
   ‚úÖ PASSED  test_data_pipeline.py

üìà Statistics:
   Total Tests: 5
   Passed: 5
   Failed: 0
   Success Rate: 100.0%
   Total Time: 32.24s

======================================================================
  Component Test Status
======================================================================

   ‚úÖ Classifier Models
   ‚úÖ Inference Predictor
   ‚úÖ Grad-CAM
   ‚úÖ Data Pipeline
   ‚úÖ Smoke Tests

======================================================================
  Recommendations
======================================================================

üéâ All tests passed! Your Phase 2 implementation is working correctly.

‚úÖ Ready to proceed with:
   - Training the classifier
   - Running the demo application
   - Moving to Phase 3

======================================================================
  Additional Checks
======================================================================

   ‚úÖ Data available: 171 training files
   ‚ö†Ô∏è  No trained model found. Train a model:
      python scripts/train_classifier.py

======================================================================
‚úÖ ALL TESTS PASSED
======================================================================


üìÑ Results saved to: C:\--DPM-MAIN-DIR--\windsurf_projects\MRI-CV-MODEL-TRAINING-AND-INFERENCE-PROJECT\test_results.txt
